---
const {
  title = "Follow the ongoing exploration",
  subtitle = "Occasional notes about mathematics, AI, and ideas I'm currently thinking about.",
  buttonText = "Subscribe",
  placeholder = "you@example.com",
  // Replace this with your provider form action URL
  actionUrl = "https://buttondown.com/api/emails/embed-subscribe/alteredchain",
} = Astro.props;
---

<section class="newsletter-wrap" aria-label="Newsletter signup">
  <div class="newsletter">
    <div class="newsletter-inner">
      <div class="copy">
        <h3>{title}</h3>
        <p>{subtitle}</p>
      </div>

      <form
        class="form"
        method="post"
        action={actionUrl}
        target="popupwindow"
        onsubmit="window.open('https://buttondown.com/alteredchain', 'popupwindow')"
      >
        <label class="sr-only" for="email">Email</label>
        <input
          id="email"
          name="email"
          type="email"
          required
          autocomplete="email"
          placeholder={placeholder}
        />

        <input type="hidden" name="success_url" value="https://www.alteredchain.com/subscribed" />

        <input class="hp" type="text" name="company" tabindex="-1" autocomplete="off" />

        <button type="submit">{buttonText}</button>
      </form>
    </div>
  </div>
</section>


<style>
  .newsletter-wrap{
  margin: 2.25rem auto;
  padding: 0 1rem;   /* page gutter */
  max-width: 900px;  /* match your content width */
}

.newsletter{
  padding: 1.25rem;
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 14px;
  background: rgba(255,255,255,0.03);
}

.newsletter-inner{
  display: grid;
  gap: 1rem;
  align-items: center;
}

@media (min-width: 700px){
  .newsletter-inner{
    grid-template-columns: 1fr auto;
    gap: 1.25rem;
  }
}

h3{ margin: 0 0 .25rem 0; font-size: 1.05rem; }
p{ margin: 0; opacity: 0.85; }

.form{
  display: flex;
  gap: .6rem;
  align-items: center;
  width: 100%;
}

@media (max-width: 520px){
  .form{
    flex-direction: column;
    align-items: stretch;
  }
  button{
    width: 100%;
  }
}

input[type="email"]{
  flex: 1 1 220px;     /* can grow, can shrink, has a sane base */
  min-width: 0;        /* IMPORTANT: allows shrinking inside flex */
  width: 100%;
  padding: .7rem .8rem;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.25);
  color: inherit;
  outline: none;
}

input[type="email"]:focus{
  border-color: rgba(255,255,255,0.28);
}

button{
  flex: 0 0 auto;      /* donâ€™t shrink */
  padding: .7rem .9rem;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.08);
  color: inherit;
  cursor: pointer;
  white-space: nowrap;
}

button:hover{ background: rgba(255,255,255,0.12); }

.sr-only{
  position: absolute;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0);
  white-space: nowrap; border: 0;
}

.hp{ display:none; }

</style>
